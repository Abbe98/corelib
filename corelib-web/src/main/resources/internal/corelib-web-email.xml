<?xml version="1.0" encoding="UTF-8"?>

<!-- 
/*
 * Copyright 2007 EDL FOUNDATION
 *
 * Licensed under the EUPL, Version 1.1 or - as soon they 
 * will be approved by the European Commission - subsequent
 * versions of the EUPL (the "License");
 * you may not use this work except in compliance with the
 * License.
 * You may obtain a copy of the License at:
 *
 * http://ec.europa.eu/idabc/eupl
 *
 * Unless required by applicable law or agreed to in
 * writing, software distributed under the License is
 * distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied.
 * See the License for the specific language governing
 * permissions and limitations under the License.
 */
 -->

<beans 
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
	">

	<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
        <property name="host" value="#{europeanaProperties['smtp.host']}"/>
        <property name="username" value="#{europeanaProperties['smtp.username']}"/>
        <property name="password" value="#{europeanaProperties['smtp.password']}"/>
	</bean>

	<bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
		<property name="velocityProperties">
			<value>
				resource.loader=class
				class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
			</value>
		</property>
	</bean>
	
	<util:map id="emailConfigs">
        <entry key="register">
			<bean class="eu.europeana.corelib.web.email.EmailConfig">
                <property name="template" value="/email/confirmation"/>
                <property name="fromEmail" value="#{europeanaProperties['system.from']}"/>
                <property name="subject" value="My Europeana email confirmation"/>
            </bean>
        </entry>
        <entry key="forgotPassword">
			<bean class="eu.europeana.corelib.web.email.EmailConfig">
                <property name="template" value="/email/forgot-password"/>
                <property name="fromEmail" value="#{europeanaProperties['system.from']}"/>
                <property name="subject" value="My Europeana reset password"/>
            </bean>
        </entry>
	</util:map>

</beans>