<?xml version="1.0" encoding="UTF-8"?>

<!-- 
/*
 * Copyright 2007 EDL FOUNDATION
 *
 * Licensed under the EUPL, Version 1.1 or - as soon they 
 * will be approved by the European Commission - subsequent
 * versions of the EUPL (the "License");
 * you may not use this work except in compliance with the
 * License.
 * You may obtain a copy of the License at:
 *
 * http://ec.europa.eu/idabc/eupl
 *
 * Unless required by applicable law or agreed to in
 * writing, software distributed under the License is
 * distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied.
 * See the License for the specific language governing
 * permissions and limitations under the License.
 */
 -->

<beans 
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
	">

	<bean id="corelib_web_mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl"
		p:host="#{europeanaProperties['smtp.host']}" p:username="#{europeanaProperties['smtp.username']}"
		p:password="#{europeanaProperties['smtp.password']}"/>

	<bean id="corelib_web_velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
		<property name="velocityProperties">
			<value>
				resource.loader=class
				class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
			</value>
		</property>
	</bean>
	
	<bean id="corelib_web_emailBuilder" class="eu.europeana.corelib.web.email.impl.EmailBuilderImpl" scope="prototype"/>
	
	<util:map id="corelib_web_emailConfigs">
        <entry key="register">
			<bean class="eu.europeana.corelib.web.email.model.EmailConfig"
				p:template="/email/confirmation" 
				p:emailFrom="#{europeanaProperties['system.from']}"
				p:subject="My Europeana email confirmation"/>
        </entry>
        <entry key="forgotPassword">
			<bean class="eu.europeana.corelib.web.email.model.EmailConfig"
				p:template="/email/forgot-password" 
				p:emailFrom="#{europeanaProperties['system.from']}"
				p:subject="My Europeana reset password"/>
        </entry>
        <entry key="userFeedback">
		    <bean class="eu.europeana.corelib.web.email.model.EmailConfig"
		    	p:template="/email/feedback"
		    	p:emailFrom="#{europeanaProperties['feedback.from']}"
		    	p:emailTo="#{europeanaProperties['feedback.to']}"
		    	p:subject="User Feedback"
		    />
        </entry>
        <entry key="userFeedbackConfirm">
		    <bean class="eu.europeana.corelib.web.email.model.EmailConfig"
		    	p:template="/email/feedback-confirmation"
		    	p:emailFrom="#{europeanaProperties['feedback.from']}"
		    	p:subject="User Feedback"
		    />
        </entry>
	</util:map>

</beans>